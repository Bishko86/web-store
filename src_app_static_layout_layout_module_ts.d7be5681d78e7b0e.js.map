{"version":3,"file":"src_app_static_layout_layout_module_ts.d7be5681d78e7b0e.js","mappings":"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","sources":["./src/app/core/enums/user-role.enum.ts","./src/app/core/guards/admin.guard.ts","./src/app/core/guards/auth.guard.ts","./src/app/core/guards/user.guard.ts","./src/app/static/layout/components/footer/footer.component.ts","./src/app/static/layout/components/footer/footer.component.html","./src/app/static/layout/components/header/header.component.ts","./src/app/static/layout/components/header/header.component.html","./src/app/static/layout/layout-routing.module.ts","./src/app/static/layout/layout.component.ts","./src/app/static/layout/layout.component.html","./src/app/static/layout/layout.module.ts"],"sourcesContent":["export enum UserRole {\n  ADMIN,\n  CLIENT\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router } from '@angular/router';\n\nimport { Store } from '@ngrx/store';\nimport { map, Observable } from 'rxjs';\n\nimport { UserRole } from '../enums/user-role.enum';\nimport { SnackBarService } from '../services/snackbar.service';\nimport { selectUserRole } from '../store/selectors/auth.selector';\nimport { AppState } from '../store/state/app.state';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AdminGuard implements CanActivate {\n  private url: string;\n\n  constructor(\n    private router: Router,\n    private snackBarServise: SnackBarService,\n    private store: Store<AppState>\n  ) {}\n\n  canActivate(route: ActivatedRouteSnapshot): boolean | Observable<boolean> {\n    this.url = route.routeConfig?.path || '';\n    return this.store.select(selectUserRole).pipe(\n      map((role) => {\n        if (this.url === 'admin' && role === 0) {\n          return true;\n        } else {\n          this.router.navigate(['']);\n          this.snackBarServise.openSnackBar(\n            `Your role is \"${UserRole[1]}\". You don't have access to this route!`,\n            'Forbidden'\n          );\n          return false;\n        }\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\n\nimport { Store } from '@ngrx/store';\nimport { map, Observable } from 'rxjs';\n\nimport { selectUser } from '../store/selectors/auth.selector';\nimport { AppState } from '../store/state/app.state';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuard implements CanActivate {\n  constructor(\n    private readonly router: Router,\n    private readonly store: Store<AppState>,\n  ) { }\n\n  public canActivate(): Observable<boolean | UrlTree> {\n    return this.store.select(selectUser).pipe(map((authenticate) => {\n      if (!authenticate) {\n        return this.router.createUrlTree(['/auth']);\n      }\n      return true;\n    }));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  ActivatedRouteSnapshot,\n  CanActivate,\n  Router,\n} from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { map, Observable } from 'rxjs';\nimport { UserRole } from '../enums/user-role.enum';\nimport { SnackBarService } from '../services/snackbar.service';\nimport { selectUserRole } from '../store/selectors/auth.selector';\nimport { AppState } from '../store/state/app.state';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class UserGuard implements CanActivate {\n  private url: string;\n\n  constructor(\n    private readonly router: Router,\n    private readonly snackBarServise: SnackBarService,\n    private readonly store: Store<AppState>\n  ) { }\n\n  public canActivate(route: ActivatedRouteSnapshot): boolean | Observable<boolean> {\n    this.url = route.routeConfig?.path || '';\n    return this.store.select(selectUserRole).pipe(\n      map((role) => {\n        if (this.url === 'client' && role === 1) {\n          return true;\n        } else {\n          this.router.navigate(['']);\n          this.snackBarServise.openSnackBar(\n            `Your role is \"${UserRole[0]}\". You don't have access to this route!`,\n            'Forbidden'\n          );\n          return false;\n        }\n      })\n    );\n  }\n}\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'app-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FooterComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>footer works!</p>\n","import { Component, OnInit, ChangeDetectionStrategy, ChangeDetectorRef, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { Store } from '@ngrx/store';\nimport { Observable, Subject, take, takeUntil } from 'rxjs';\nimport { User } from 'src/app/core/models';\n\nimport { logout } from 'src/app/core/store/actions/auth.actions';\nimport { selectUser, selectUserRole } from 'src/app/core/store/selectors/auth.selector';\nimport { AppState } from 'src/app/core/store/state/app.state';\nimport { CartService } from 'src/app/features/client/services/cart.service';\nimport { State } from 'src/app/core/decorators/ngrx-selector.decorator'\nimport { UserRole } from 'src/app/core/enums/user-role.enum';\nimport { DestroyableDirective } from 'src/app/core/directives/destroyable.directive';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [CartService]\n})\nexport class HeaderComponent extends DestroyableDirective implements OnInit, OnDestroy {\n  private readonly roles = ['Admin', 'Client'];\n  \n  public userRole: string\n  public amountCartProducts: number;\n\n  @State(selectUser) public readonly user$: Observable<User>;\n  @State(selectUserRole) private readonly role$: Observable<UserRole | undefined> = this.store.select(selectUserRole);\n\n\n  constructor(\n    private readonly router: Router,\n    private readonly store: Store<AppState>,\n    private readonly cartService: CartService,\n    private readonly cdr: ChangeDetectorRef\n    ) { super() }\n\n  private getUserRole(): void {\n    this.role$.pipe(takeUntil(this.destroy$)).subscribe((role) => {\n      if(typeof role === 'number') {\n      this.userRole = this.roles[role]\n      }\n    })\n  }\n  \n  public ngOnInit(): void {\n    this.cartService.getCart().pipe(take(1)).subscribe(data => {\n      if(data && Array.isArray(data.products)) {\n        this.amountCartProducts = data.products.length\n        this.cdr.markForCheck();\n      }\n    });\n    this.getUserRole();\n  }\n\n  public showCart(): void {\n    this.router.navigate(['client/cart']);\n  }\n\n  public signOut(): void {\n    this.store.dispatch(logout());\n  }\n\n  public toPersonalCabinet(): void {\n    this.router.navigateByUrl(this.userRole.toLowerCase());\n  }\n}\n","<header class=\"header\">\n  <div class=\"left-header-side\">\n    <button mat-button [matMenuTriggerFor]=\"userMenu\">Menu</button>\n    <mat-menu #userMenu=\"matMenu\">\n      <button mat-menu-item>Item 1</button>\n      <button mat-menu-item>Item 2</button>\n      <button mat-menu-item>Item 3</button>\n    </mat-menu>\n  </div>\n  <div class=\"right-header-side\">\n    <button\n      mat-mini-fab\n      color=\"secondary\"\n      aria-label=\"Cart icon button\"\n      class=\"cart-btn\"\n      (click)=\"showCart()\"\n    >\n      <mat-icon>add_shopping_cart</mat-icon>\n      <small class=\"indicator\">{{ amountCartProducts }}</small>\n    </button>\n\n    <div class=\"logged-in\" *ngIf=\"user$ | async as user; else logouted\">\n      <button mat-button [matMenuTriggerFor]=\"authMenu\">\n        Hi, {{ user.name }}\n      </button>\n      <mat-menu #authMenu=\"matMenu\">\n        <button mat-menu-item (click)=\"toPersonalCabinet()\">{{userRole}} Cabinet</button>\n        <button mat-menu-item>Settings</button>\n        <button mat-menu-item (click)=\"signOut()\">Sign out</button>\n      </mat-menu>\n    </div>\n    <ng-template #logouted>\n      <div class=\"logged-out\">\n        <a mat-raised-button routerLink=\"/auth/sign-in\">Sign in</a>\n        <a mat-raised-button routerLink=\"/auth/sign-up\">Sign up</a>\n      </div>\n    </ng-template>\n  </div>\n</header>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { AdminGuard } from 'src/app/core/guards/admin.guard';\nimport { AuthGuard } from 'src/app/core/guards/auth.guard';\nimport { UserGuard } from 'src/app/core/guards/user.guard';\nimport { LayoutComponent } from './layout.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LayoutComponent,\n    children: [\n      {\n        path: '', loadChildren: () => import('../../features/shop/shop.module').then((mod) => mod.ShopModule)\n      },\n      {\n        path: 'admin', loadChildren: () => import('../../features/admin/admin.module').then((mod) => mod.AdminModule),\n        canActivate: [AuthGuard, AdminGuard],\n      },\n      {\n        path: 'client',\n        loadChildren: () => import('../../features/client/client.module').then((mod) => mod.ClientModule),\n        canActivate: [AuthGuard, UserGuard],\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [CommonModule, RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LayoutRoutingModule {}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'app-layout',\n  templateUrl: './layout.component.html',\n  styleUrls: ['./layout.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LayoutComponent { }\n","<div class=\"content-wrapper\">\n  <app-header></app-header>\n  <main class=\"main-content\">\n    <router-outlet></router-outlet>\n  </main>\n  <app-footer></app-footer>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HeaderComponent } from './components/header/header.component';\nimport { FooterComponent } from './components/footer/footer.component';\nimport { LayoutComponent } from './layout.component';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { LayoutRoutingModule } from './layout-routing.module';\n\n@NgModule({\n  declarations: [\n    LayoutComponent,\n    HeaderComponent,\n    FooterComponent,\n  ],\n  imports: [\n    CommonModule,\n    SharedModule,\n    LayoutRoutingModule,\n  ],\n})\nexport class LayoutModule { }\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
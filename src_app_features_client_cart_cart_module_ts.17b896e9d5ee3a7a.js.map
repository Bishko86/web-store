{"version":3,"file":"src_app_features_client_cart_cart_module_ts.17b896e9d5ee3a7a.js","mappings":";;;;;;;;;;;;;;AAA6C;AAK7C,MAAM,aAAa,GAAG,CAAC,KAAe,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC;AAE/C,MAAM,cAAc,GAAG,2DAAc,CAC1C,aAAa,EACb,CAAC,KAAgB,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,CACjC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;ACVuG;AAG5D;AAEwC;AACb;AACK;AAEgB;;;;;;ICP3F,yEAA6E;IACrE,uDAAS;IAAA,4DAAO;IACtB,uEAAM;IAAA,uDAAgB;IAAA,4DAAO;IAC7B,uEAAM;IAAA,uDAA4B;;IAAA,4DAAO;IACzC,0EAAgE;IAAtC,uVAAS,8FAA2B,KAAC;IAAC,iEAAQ;IAAA,4DAAO;;;;IAHzE,0DAAS;IAAT,yEAAS;IACT,0DAAgB;IAAhB,gFAAgB;IAChB,0DAA4B;IAA5B,kJAA4B;;ADa/B,MAAM,aAAc,SAAQ,+FAAoB;IAKrD,YACmB,KAAsB,EACtB,GAAsB;QAAI,KAAK,EAAE;QADjC,UAAK,GAAL,KAAK,CAAiB;QACtB,QAAG,GAAH,GAAG,CAAmB;QAJlC,iBAAY,GAAc,EAAE,CAAC;IAIiB,CAAC;IAE/C,QAAQ;QACb,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,oFAAW,EAAE,CAAC,CAAC;QACnC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,+CAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE;YAE/D,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,EAAE;gBACjC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAqB,CAAC;aAChD;YAED,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;QAC1B,CAAC,CAAC;IACJ,CAAC;IAEM,cAAc,CAAC,SAAiB;QACrC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,8FAAqB,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC;IAC5D,CAAC;;0EAvBU,aAAa;2GAAb,aAAa;QClB1B,qEAAI;QAAA,oEAAS;QAAA,4DAAK;QAClB,yEAAkB;QAChB,0GAKM;QACR,4DAAM;;QAN2C,0DAAiB;QAAjB,qFAAiB;;;IDiB/D,sFAAK,CAAC,uFAAc,CAAC;gDAA6C;;;;;;;;;;;;;;;;;;;AElBtB;AACA;AACE;;;AAW1C,MAAM,UAAU;;oEAAV,UAAU;uGAAV,UAAU;2GAJnB,yDAAY;QACZ,kEAAqB,CAAC,CAAC,EAAC,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,0DAAa,EAAC,CAAC,CAAC;mIAGpD,UAAU,mBANN,0DAAa,aAE1B,yDAAY","sources":["./src/app/core/store/selectors/user.selectors.ts","./src/app/features/client/cart/cart.component.ts","./src/app/features/client/cart/cart.component.html","./src/app/features/client/cart/cart.module.ts"],"sourcesContent":["import { createSelector } from \"@ngrx/store\";\n\nimport { AppState } from \"../state/app.state\";\nimport { UserState } from \"../state/user.state\";\n\nconst selectFeature = (state: AppState) => state.user;\n\nexport const selectUserCart = createSelector(\n  selectFeature,\n  (state: UserState) => state.cart,\n);\n","import { Component, OnInit, ChangeDetectionStrategy, ChangeDetectorRef, OnDestroy } from '@angular/core';\n\nimport { Store } from '@ngrx/store';\nimport { Observable, takeUntil } from 'rxjs';\n\nimport { DestroyableDirective } from 'src/app/core/directives/destroyable.directive';\nimport { State } from 'src/app/core/decorators/ngrx-selector.decorator';\nimport { selectUserCart } from 'src/app/core/store/selectors/user.selectors';\nimport { AppState } from 'src/app/core/store/state';\nimport { getUserCart, removeProductFromCart } from 'src/app/core/store/actions/user.actions';\nimport { Cart, Product } from 'src/app/core/models';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CartComponent extends DestroyableDirective implements OnInit, OnDestroy {\n  @State(selectUserCart) public readonly userCart$: Observable<Cart>;\n\n  public cartProducts: Product[] = [];\n\n  constructor(\n    private readonly store: Store<AppState>,\n    private readonly cdr: ChangeDetectorRef) { super() }\n\n  public ngOnInit(): void {\n    this.store.dispatch(getUserCart());\n    this.userCart$.pipe(takeUntil(this.destroy$)).subscribe((data) => {\n\n      if (Array.isArray(data?.products)) {\n        this.cartProducts = data.products as Product[];\n      }\n\n      this.cdr.markForCheck();\n    })\n  }\n\n  public removeFromCart(productId: string): void {\n    this.store.dispatch(removeProductFromCart({ productId }));\n  }\n}\n","<h1>USER CART</h1>\n<div class=\"cart\">\n  <div class=\"cart__product\" *ngFor=\"let product of cartProducts; let i=index\">\n    <span>{{i + 1}}</span>\n    <span>{{product.name}}</span>\n    <span>{{product.price | currency}}</span>\n    <span class=\"delete-item\" (click)=\"removeFromCart(product.id!)\">&#10005;</span>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { CartComponent } from './cart.component';\n\n\n\n@NgModule({\n  declarations: [CartComponent],\n  imports: [\n    CommonModule,\n    RouterModule.forChild([{path: '', component: CartComponent}])\n  ],\n})\nexport class CartModule { }\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}